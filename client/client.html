<head>
  <title>L'addition est pour moi</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<!--   <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'> -->
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900' rel='stylesheet' type='text/css'>

  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-15752713-10']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
</head>

<body>

  <div id="navbarExample" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="logo" href="#">L<span class="add">+</span>addition est pour moi</a>
        <p class="navbar-text pull-right">{{loginButtons}}</p>
        <ul class="nav pull-right">
          <li><a href="#about">A propos</a></li>
          <li><a href="#users">Les hôtes</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="container">

    <div class="row">
      <div class="offset1 span4">
        <h2 class="center">Entrepreneur à l'affiche</h2>
        {{> starredProfile}}
      </div>

      {{> welcome}}
    </div>
<!--
TODO rework the texts
    <br/><br/><br/><br/><br/>
    <hr/>
    <div class="row">
      <div class="offset2 span4">
        <h4>Pour les mentors</h4>
        <p>Vous avez une expertise et vous avez envie de la partager.</p>
        <p>Vous aimez vous faire invité dans un bon restaurant.</p>
      </div>

      <div class="span4">
        <h4>Pour les inviteurs</h4>
        <p>Vous cherchez à résoudre un problème particulier.</p>
        <p>Vous êtes prêts à payer un repas pour en discuter avec une personne qualifiées</p>
      </div>
    </div>
-->
    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><hr/>
    <section id="users">
        {{> users}}
    </section>

    {{#isAdmin}}
      {{> potentialUsers}}
    {{/isAdmin}}
    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><hr/>
    <section id="about">
      <div class="row">
        <div class="offset3 span6">
          <h2>A propos</h2>
          <p><span class="label">L'addition est pour moi</span> est une initiative de la société <b>No Parking</b>,<br/>éditrice du <a href="http://opentime.fr/">logiciel de gestion du temps et de suivi d'ativités <b>Opentime</b></a>.<br/><img src="http://ladditionestpourmoi.fr/medias/images/logo-opentime-250x125.png" class="img-rounded"/></p>
          <p><span class="label">L'addition est pour moi</span> est développé et maintenu par <b>Vianney Lecroart</b></p>
        </div>
      </div>
    </section>

    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><hr/>

  </div> <!-- /container -->
  <!-- modal windows -->
  {{> profileDialog}}
  {{> showProfileDialog}}
  {{> inviteDialog}}
</body>


<template name="users">
  <div class="row">
    <h2>Les hôtes</h2>
    <ul class="thumbnails">
      {{#each users}}
        {{> user}}
      {{/each}}
    </ul>
  </div>
<!--  <div class="row">
    <div class="offset5 span4">
      <a class="btn" id="moreUsersButton">Voir davantage de profiles</a>
    </div>
  </div>
-->
</template>

<template name="potentialUsers">
  <div class="row">
    <h2>Les hôtes à valider</h2>
    <ul class="thumbnails">
      {{#each users}}
        {{> user}}
      {{/each}}
    </ul>
  </div>
</template>


<template name="user">
  <li class="span3">
    <div class="thumbnail user wrapper hand grad">
        {{#if profile.picture}}
          <img src="{{profile.picture}}?s=260" alt="{{profile.name}}"/>
        {{/if}}
        <div class="caption">
          <h3>{{profile.name}}</h3>
          <p><a href="http://twitter.com/{{profile.twitter}}">{{profile.twitter}}</a></p>
          <p><b>{{profile.city}}</b></p>
          <p>{{bio profile.bio}}</p>
      </div>
    </div>
  </li>
</template>

<template name="welcome">
  <div class="offset1 span6 welcome center">
    <h1>Invitez des entrepreneurs experimentés au restaurant !</h1>
    <p>Vous avez de l'<b>experience</b> dans un domaine et vous voulez la <b>partager</b> autour d'un bon repas offert ?</p>
    <p>Vous avez un <b>problème</b> précis et vous êtes prêts à payer un restaurant pour en discuter avec une <b>personne qualifiée</b> ?</p>
    {{#unless currentUser}}
      <p><a class="btn btn-large btn-success" id="signupButton">Inscrivez-vous dès maintenant !</a></p>
    {{/unless}}
  </div>
</template>

<template name="starredProfile">
  {{#if user}}
    <div class="thumbnail grad hand sc hide">
      {{#with user}}
        <img src="{{profile.picture}}?s=360" alt="{{profile.name}}"/>
        <div class="caption">
          <h3>{{profile.name}}</h3>
          <p><a href="http://twitter.com/{{profile.twitter}}">{{profile.twitter}}</a></p>
          <h4>{{profile.city}}</h4>
          <p id="starredWrapper">{{bio profile.bio}}</p>
          <p class="center">
            {{#if currentUser}}
              <a class="btn btn-primary" id="inviteButton">L'inviter au restaurant</a>
            {{else}}
              <a class="btn disabled">Inscrivez-vous pour l'inviter</a>
            {{/if}}
          </p>
        </div>
      {{/with}}
    </div>
  {{/if}}
</template>

<template name="inviteDialog">
  <div id="inviteDialog" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">Inviter {{user.profile.name}} au restaurant</h3>
    </div>
    <div class="modal-body">
      <form>
          <label>Message d'invitation pour {{user.profile.name}}</label>
          <textarea id="inviteMessage" class="span5" rows="10"></textarea>
      </form>
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Annuler</button>
      <button id="sendInvitation" class="btn btn-primary">Envoyer le message</button>
    </div>
  </div>
</template>

<template name="profileDialog">
  <div id="profileDialog" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">{{modalLabel}}</h3>
    </div>
    <div class="modal-body">
      <form>
          {{#isAdmin}}
            <div>
              {{#if user.validated}}
                <button id="unsetValidated" class="btn btn-danger">Invalider le profile</button>
              {{else}}
                <button id="setValidated" class="btn">Valider le profile</button>
              {{/if}}
              <button id="setStarred" class="btn">Mettre à l'affiche</button>
              {{#if user.admin}}
                <button id="unsetAdmin" class="btn btn-danger">Retirer l'admin</button>
              {{else}}
                <button id="setAdmin" class="btn">Passer admin</button>
              {{/if}}
            </div>
          {{/isAdmin}}
          {{#if user.profile.mentor}}
            {{#if user.validated}}
             <div class="alert alert-success"><strong>Info</strong>: Votre profil est validé et apparait dans la liste des mentors.</div>
            {{else}}
             <div class="alert"><strong>Info</strong>: Votre profil est en cours de validation par les modérateurs pour pouvoir être officiellement présenter dans la liste des mentors.</div>
            {{/if}}
          {{/if}}
          <label>Nom</label>
          <input id="profileName" class="span5" type="text" placeholder="Prénom Nom…" value="{{user.profile.name}}">
          <label>Ville</label>
          <input id="profileCity" class="span5" type="text" placeholder="Ville où manger…" value="{{user.profile.city}}">
          <label>Url de mon avatar (laissez vide pour utiliser gravatar)</label>
          <input id="profilePicture" class="span5" type="text" placeholder="http://…" value="{{user.profile.picture}}">
          <label>Twitter</label>
          <input id="profileTwitter" class="span5" type="text" placeholder="@username…" value="{{user.profile.twitter}}">
          <label class="checkbox">
            <input id="profileMentor" {{mentorchecked}} type="checkbox" value="1"> Je désire partager mon experience et pouvoir être invité à manger à l'oeil
          </label>
          <label>Bio</label>
          <textarea id="profileBio" class="span5" rows="10">{{user.profile.bio}}</textarea>
      </form>
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Fermer</button>
      <button id="saveProfile" class="btn btn-primary">Save changes</button>
    </div>
  </div>
</template>

<template name="showProfileDialog">
  {{#if profile}}
  <div id="showProfileDialog" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel2" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel2">{{profile.name}}</h3>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="span2">
          <img src="{{profile.picture}}?s=160" alt="{{profile.name}}"/>
        </div>
        <div class="span2">
          <p><a href="http://twitter.com/{{profile.twitter}}">{{profile.twitter}}</a></p>
          <h4>{{profile.city}}</h4>
        </div>
      </div>
      <br/>
      <p>{{bio profile.bio}}</p>
    </div>
    <div class="modal-footer">
        {{#if currentUser}}
          <a class="invite btn btn-primary" ahref="#">L'inviter au restaurant</a> 
          {{#isAdmin}}
            <a class="edit btn" ahref="#">Editer le profile</a> 
          {{/isAdmin}}
        {{else}}
          <a class="btn disabled">Inscrivez-vous pour l'inviter</a>
        {{/if}}
      <button class="btn" data-dismiss="modal" aria-hidden="true">Fermer</button>
    </div>
  </div>
  {{/if}}
</template>
